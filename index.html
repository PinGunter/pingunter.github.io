<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title style="display: none">Salva's Site</title>
    <link rel="stylesheet" href="static/styles.css" />
  </head>
  <body onload="onLoad()" class="light">
    <header>
      <input
        id="toggle"
        class="toggle"
        type="button"
        value="☀ Toggle"
        onclick="toggleDarkMode()"
      />
    </header>
    <h1>How AstraEngine was made</h1>
    <h2 id="loc" class="dropdown">▶ List of Contents</h2>
    <ul id="loc-items">
      <li>
        <a href="#1">Begginings with Vulkan</a>
      </li>
      <li>
        <a href="#2">Taking the Nvidia Tutorials</a>
      </li>
      <li>
        <a href="#3">Extending what we had</a>
      </li>
    </ul>
    <h2 id="0">What Is AstraEngine?</h2>
    <p>
      AstraEngine is a C++ library to help you get create a 3D graphical
      application with hardware-accelerated ray-tracing support. It started as a
      Master's Thesis for my Software Development / Computer Graphics Master.
      However, I still continue to work on it, adding new features from time to
      time.
    </p>
    <p>
      One of the main goals was to make it simple enough so it could also be
      used, at least partly, in Computer Graphics courses. Since my previous
      experience with this kind of software provided by professors was not that
      great.
    </p>
    <p>
      The other main objective was to support hardware-accelerated ray-tracing,
      since it was a particular interest of mine and my tutor. It's also an
      interesting technology to learn, specially with the current state of
      modern GPUs with broad support for it.
    </p>
    <p>
      You can check the code at
      <a href="https://github.com/PinGunter/AstraEngine">AstraEngine Repo</a>
      and checkout out some examples that use the library at
      <a href="https://github.com/PinGunter/AstraExamples">samples repository</a
      >.
    </p>
    <p>
      The latest upgrade has been the creation of a pathtracer. It is currently
      a naive implementation but one that can create really realistic images.
    </p>
    <h3>Some Pathtraced Pictures:</h3>
    <div class="images">
      <p>Cornell Box, pathtraced with metal and glass spheres:</p>
      <img
        src="static/cornell.png"
        alt="Cornell Box, pathtraced with metal and glass spheres"
      />

      <p>
        Blender's Suzanne, as a glass object. Illluminated by a light source
        above it:
      </p>
      <img
        src="static/glassmonkey.jpg"
        alt="Blender's Suzanne, as a glass object. Illluminated by a light source above it"
      />
      <p>A complete dark scene, just illuminated by the lights of a car:</p>
      <img
        src="static/car.jpg"
        alt="A complete dark scene, just illuminated by the lights of a car"
      />
    </div>
    <h2 id="1">Begginings with Vulkan</h2>
    <p>
      When I first started this project, 11 months ago, I had never used Vulkan
      before. I had worked a little with OpenGL but Vulkan is a whole beast of
      its own.
    </p>
    <p>
      I first started with the classic
      <a style="display: inline" href="https://vulkan-tutorial.com/"
        >Vulkan Tutorial</a
      >. After days (and weeks) working on it, trying to understand every bit of
      it, I managed to get my first ever triangle in Vulkan.
    </p>
    <img src="static/vulkanTriangle.png" alt="vulkan RGB triangle" />
    <p>A lot of time has passed since that moment but I'm still proud of it.</p>
    <p>
      Later I got to work with 3D models and some basic camera manipulation. At
      this point I was modifying the basic tutorial code to get to know it more.
      However I still did not understand it quite well.
    </p>
    <video src="static/cube.mp4" controls autoplay loop muted></video>

    <p>
      After that, I was kind of stuck. I didn't know how to organize the code
      and interacting directly with the API without any abstractions was
      difficult. Besides, one of my main goals with this project was to work
      with the <strong>Ray-Tracing</strong> Vulkan Extension, so I needed to
      start working on that.
    </p>
    <h2 id="2">Taking the Nvidia Tutorials</h2>
    <p>
      A couple of months passed, where I was in a weird spot: I didn't really
      know how to proceed and didn't have the time either. I finally decided to
      take the Nvidia Ray-Tracing Tutorial for Vulkan. This allowed me to get to
      speed and actually grasp how Vulkan worked.
    </p>
    <p>
      Following this tutorial I was able to get my first rasterized and
      ray-traced scene.
    </p>
    <img src="static/monkey.png" width="100%" alt="ray-traced blender monkey" />
    <h2 id="3">Extending what we had</h2>
    <p>
      I know had a base frame where I could work. I started adding things like
      <a href="https://github.com/CedricGuillemet/ImGuizmo">ImGuizmo</a> (ImGui
      was already in the base project). And started to learn on how to
      manipulate transforms, when to rebuild the acceleration structures and
      things like that.
    </p>
    <p>
      On the graphics side of things, I added ray-traced shadows and
      reflections. Both of which were quite easy to implement given the nature
      of ray-tracing. This allowed me to have full-working mirrors in the scene.
      The difference between getting mirrors to work in ray-tracing vs
      rasterization is huge.
    </p>
    <img src="static/mirror.png" width="100%" alt="ray-traced shadows" />

    <p>
      I started adding new abstractions so that I could work better. One of the
      goals is for the library to be simple to use so I made several classes
      that worked together to achieve that.
    </p>
    The most important ones are:
    <ul>
      <li>
        <strong>Renderer</strong>: Renders the scene following
        <a href="#renderdiagram">this diagram</a>
      </li>
      <li>
        <strong>App</strong>: Is the main class that gets all the components
        working together
      </li>
      <li>
        <strong>Device</strong>: In charge of Vulkan and device initialization
      </li>
      <li>
        <strong>Node3D</strong>: Represents any object present in a scene, every
        object with a transform matrix
      </li>
    </ul>
    <img
      id="diagram_light"
      src="static/renderer_light.png"
      alt="render process"
    />
    <img
      id="diagram_dark"
      src="static/renderer_dark.png"
      alt="render process"
    />

    <script src="static/index.js"></script>
  </body>
</html>
